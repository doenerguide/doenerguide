"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4014],{4014:(x,h,o)=>{o.r(h),o.d(h,{SignupPage:()=>D});var e=o(4438),M=o(177),n=o(4341),s=o(1075),c=o(70),E=o(5312),C=o(9885),O=o(7291);const k=["errorMessage"],b=()=>["/login"];let w=E.c.endpoint,D=(()=>{var u;class f{constructor(t,r,i,a){this.formBuilder=t,this.router=r,this.userSrv=i,this.storageSrv=a,this.form=this.formBuilder.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(8)]],passwordConfirm:["",[n.k0.required,n.k0.minLength(8)]],vorname:["",n.k0.required],nachname:["",n.k0.required],terms:[!1,n.k0.requiredTrue]})}ngOnInit(){this.userSrv.isLoggedIn()&&this.router.navigate(["/account"])}checkRegisterButton(){var t,r,i,a,g,m;return!(null!=(t=this.form.get("email"))&&t.valid&&null!=(r=this.form.get("password"))&&r.valid&&null!=(i=this.form.get("passwordConfirm"))&&i.valid&&null!=(a=this.form.get("vorname"))&&a.valid&&null!=(g=this.form.get("nachname"))&&g.valid&&null!=(m=this.form.get("terms"))&&m.valid)}register(){var m,p,_,v,P;if(this.errorMessage.nativeElement.innerHTML="",this.checkRegisterButton())return;if(!this.form.valid)return void(this.errorMessage.nativeElement.innerHTML="Bitte f\xfcllen alle Felder korrekt aus");let t=null==(m=this.form.get("password"))?void 0:m.value;if(t!==(null==(p=this.form.get("passwordConfirm"))?void 0:p.value))return void(this.errorMessage.nativeElement.innerHTML="Passw\xf6rter stimmen nicht \xfcberein");let i=null==(_=this.form.get("email"))?void 0:_.value,a=null==(v=this.form.get("vorname"))?void 0:v.value,g=null==(P=this.form.get("nachname"))?void 0:P.value;fetch(w+"/signup",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({email:i,password:t,vorname:a,nachname:g})}).then(l=>l.json()).then(l=>{if(l.success){let T=l.user;this.storageSrv.setSessionToken(l.session_id),this.userSrv.setUser(T),this.router.navigate(["/home",{message:"Erfolgreich registriert"}])}else this.errorMessage.nativeElement.innerHTML="Diese E-Mail Adresse ist bereits registriert"}).catch(l=>{console.error("Error:",l)})}}return(u=f).\u0275fac=function(t){return new(t||u)(e.rXU(n.ok),e.rXU(c.Ix),e.rXU(C.D),e.rXU(O.n))},u.\u0275cmp=e.VBU({type:u,selectors:[["app-signup"]],viewQuery:function(t,r){if(1&t&&e.GBs(k,5,e.aKT),2&t){let i;e.mGM(i=e.lsd())&&(r.errorMessage=i.first)}},standalone:!0,features:[e.aNF],decls:27,vars:5,consts:[["errorMessage",""],[1,"ion-padding",3,"fullscreen"],[1,"title"],["id","icon","alt","User Icon","src","/assets/icon/logo.png"],[1,"titles"],[1,"login"],["id","input",3,"formGroup"],["formControlName","vorname","label","Vorname","labelPlacement","floating","placeholder","Dein Vorname","required","true"],["formControlName","nachname","labelPlacement","floating","label","Nachname","placeholder","Dein Nachname","required","true"],["formControlName","email","label","E-Mail","labelPlacement","floating","placeholder","Deine E-Mail Adresse","required","true"],["formControlName","password","label","Passwort","labelPlacement","floating","placeholder","Dein Passwort","type","password","helperText","Mindestl\xe4nge 8 Zeichen","minlength","8","required","true"],["formControlName","passwordConfirm","label","Passwort wiederholen","labelPlacement","floating","placeholder","Password best\xe4tigen","helperText","Mindestl\xe4nge 8 Zeichen","type","password","minlength","8","required","true"],["id","nutzungsbedingungen","formControlName","terms","slot","","required","true"],["slot","label"],["id","buttons"],["fill","outline",3,"routerLink"],["name","arrow-back-outline","slot","start"],["id","signup","size","medium","form","input","type","submit",3,"click","disabled"]],template:function(t,r){if(1&t){const i=e.RV6();e.j41(0,"ion-content",1)(1,"div",2),e.nrm(2,"img",3),e.j41(3,"div",4)(4,"h1"),e.EFF(5,"Willkommen zu D\xf6nerGuide!"),e.k0s(),e.j41(6,"h4"),e.EFF(7,"Registieren"),e.k0s()()(),e.j41(8,"div",5)(9,"ion-label"),e.EFF(10,"Bitte f\xfclle alle Felder aus, um sich zu registrieren."),e.k0s(),e.j41(11,"form",6),e.nrm(12,"ion-input",7)(13,"ion-input",8)(14,"ion-input",9)(15,"ion-input",10)(16,"ion-input",11),e.j41(17,"ion-checkbox",12),e.EFF(18," Nutzungsbedingungen "),e.k0s()(),e.nrm(19,"div",13,0),e.j41(21,"div",14)(22,"ion-button",15),e.nrm(23,"ion-icon",16),e.EFF(24," Zur\xfcck zum Login "),e.k0s(),e.j41(25,"ion-button",17),e.bIt("click",function(){return e.eBV(i),e.Njj(r.register())}),e.EFF(26," Registrieren "),e.k0s()()()()}2&t&&(e.Y8G("fullscreen",!0),e.R7$(11),e.Y8G("formGroup",r.form),e.R7$(11),e.Y8G("routerLink",e.lJ4(4,b)),e.R7$(3),e.Y8G("disabled",r.checkRegisterButton()))},dependencies:[s.bv,s.Jm,s.eY,s.W9,s.iq,s.$w,s.he,s.hB,s.Gw,s.N7,M.MD,n.YN,n.qT,n.BC,n.cb,n.YS,n.xh,n.X1,n.j4,n.JD,c.iI,c.Wk],styles:[".login[_ngcontent-%COMP%]{text-align:center;justify-content:center;display:grid}.login[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{max-width:400px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-top:70px}.titles[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0}.titles[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--ion-color-medium)}#nutzungsbedingungen[_ngcontent-%COMP%]{margin:10px 0}ion-checkbox[_ngcontent-%COMP%]{width:100%}#icon[_ngcontent-%COMP%]{width:8vmax;padding:auto}#input[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-evenly;width:100%;max-width:600px}ion-input[_ngcontent-%COMP%]{width:100%;margin-bottom:2.5%;text-align:left}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:100%;margin-top:50px}"]}),f})()}}]);