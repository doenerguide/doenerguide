"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9444],{9444:(L,_,i)=>{i.r(_),i.d(_,{LoginPage:()=>C});var d=i(467),e=i(4438),h=i(177),o=i(4341),s=i(1075),c=i(70),p=i(5312),v=i(9885),P=i(9011),M=i(7291);const E=["errorMessage"],O=()=>["/signup"];let D=p.c.endpoint,C=(()=>{var l;class m{constructor(n,t,r,a,u){this.formBuilder=n,this.router=t,this.userSrv=r,this.databaseSrv=a,this.storageSrv=u,this.form=this.formBuilder.group({email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(8)]]})}ngOnInit(){this.userSrv.isLoggedIn()&&this.router.navigate(["/account"])}handleLogin(){var n=this;this.form.valid&&fetch(D+"/login",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(this.form.value)}).then(t=>t.json()).then(function(){var t=(0,d.A)(function*(r){if(r.success){let a=r.user;a.favoriten=yield Promise.all(a.favoriten.map(function(){var u=(0,d.A)(function*(f){return yield n.databaseSrv.getShop(f)});return function(f){return u.apply(this,arguments)}}())),n.storageSrv.setSessionToken(r.session_id),n.userSrv.setUser(a),n.router.navigate(["/home",{message:"Login erfolgreich"}])}else n.errorMessage.nativeElement.innerHTML="Falsche E-Mail oder falsches Passwort"});return function(r){return t.apply(this,arguments)}}()).catch(t=>{console.error("Error:",t)})}checkLoginButton(){return!this.form.valid}}return(l=m).\u0275fac=function(n){return new(n||l)(e.rXU(o.ok),e.rXU(c.Ix),e.rXU(v.D),e.rXU(P.B),e.rXU(M.n))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-login"]],viewQuery:function(n,t){if(1&n&&e.GBs(E,5,e.aKT),2&n){let r;e.mGM(r=e.lsd())&&(t.errorMessage=r.first)}},standalone:!0,features:[e.aNF],decls:32,vars:5,consts:[["errorMessage",""],[1,"ion-padding",3,"fullscreen"],[1,"title"],["id","icon","alt","User Icon","src","/assets/icon/logo.png"],[1,"titles"],[1,"login"],["id","input",3,"formGroup"],["formControlName","email","label","E-Mail","labelPlacement","floating","placeholder","Deine E-Mail Adresse"],["formControlName","password","label","Passwort","labelPlacement","floating","placeholder","Dein Passwort","type","password"],["slot","label"],["id","buttons"],["id","login","type","submit","form","input",3,"click","disabled"],["fill","outline",3,"routerLink"],["name","arrow-forward-outline","slot","end"]],template:function(n,t){if(1&n){const r=e.RV6();e.j41(0,"ion-content",1)(1,"div",2),e.nrm(2,"img",3),e.j41(3,"div",4)(4,"h1"),e.EFF(5,"Willkommen zu D\xf6nerGuide!"),e.k0s(),e.j41(6,"h4"),e.EFF(7,"Login"),e.k0s()()(),e.j41(8,"div",5)(9,"ion-label"),e.EFF(10,"Bitte gib deine Daten ein oder registriere dich."),e.nrm(11,"br"),e.k0s(),e.j41(12,"ion-label"),e.EFF(13,"Mit einem Nutzerkonto hast du folgende Vorteile:"),e.k0s(),e.j41(14,"ul")(15,"li"),e.EFF(16,"Speichern von Favoriten"),e.k0s(),e.j41(17,"li"),e.EFF(18,"Stempelkarte"),e.k0s(),e.j41(19,"li"),e.EFF(20,"Dark-Mode"),e.k0s()(),e.j41(21,"form",6),e.nrm(22,"ion-input",7)(23,"ion-input",8),e.k0s(),e.nrm(24,"div",9,0),e.j41(26,"div",10)(27,"ion-button",11),e.bIt("click",function(){return e.eBV(r),e.Njj(t.handleLogin())}),e.EFF(28," Login "),e.k0s(),e.j41(29,"ion-button",12),e.EFF(30," Zur Registrierung "),e.nrm(31,"ion-icon",13),e.k0s()()()()}2&n&&(e.Y8G("fullscreen",!0),e.R7$(21),e.Y8G("formGroup",t.form),e.R7$(6),e.Y8G("disabled",t.checkLoginButton()),e.R7$(2),e.Y8G("routerLink",e.lJ4(4,O)))},dependencies:[s.bv,s.Jm,s.W9,s.iq,s.$w,s.he,s.Gw,s.N7,h.MD,o.YN,o.qT,o.BC,o.cb,c.iI,c.Wk,o.X1,o.j4,o.JD],styles:[".login[_ngcontent-%COMP%]{text-align:center;justify-content:center;display:grid}.login[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{max-width:400px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-top:70px}.titles[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0}.titles[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--ion-color-medium)}#nutzungsbedingungen[_ngcontent-%COMP%]{margin:10px 0}ion-checkbox[_ngcontent-%COMP%]{width:100%}#icon[_ngcontent-%COMP%]{width:8vmax;padding:auto}#input[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-evenly;width:100%;max-width:600px}ion-input[_ngcontent-%COMP%]{width:100%;margin-bottom:2.5%;text-align:left}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:100%;margin-top:50px}"]}),m})()}}]);